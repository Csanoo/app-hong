<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="main.java.app.hgm.member">

	<select id="selectMemberLogin" parameterType="main.java.app.hgm.member.MemberVO" resultType="main.java.app.hgm.member.MemberVO">
		SELECT idx, id
			,passwd
            ,name
            ,photo
            ,icon
            ,nick
            ,resno
            ,email
            ,tphone
            ,hphone
            ,comtel
            ,homepage
            ,post
            ,address1
            ,address2
            ,reemail
            ,resms
            ,birthday
            ,bgubun
            ,marriage
            ,memorial
            ,scholarship
            ,job
            ,income
            ,car
            ,hobby
            ,consph
            ,conprd
            ,level
            ,recom
            ,visit
            ,visit_time
            ,intro
            ,memo
            ,addinfo1
            ,addinfo2
            ,addinfo3
            ,addinfo4
            ,addinfo5
            ,wdate
		from wiz_member
		where id=#{id} and passwd = md5(#{passwd})
	</select>
	
	<select id="selectMemberRead"
		parameterType="String"
		resultType="main.java.app.hgm.member.MemberVO">
		SELECT  idx, id
                   ,passwd
                   ,name
                   ,photo
                   ,icon
                   ,nick
                   ,resno
                   ,email
                   ,tphone
                   ,hphone
                   ,comtel
                   ,homepage
                   ,post
                   ,address1
                   ,address2
                   ,reemail
                   ,resms
                   ,birthday
                   ,bgubun
                   ,marriage
                   ,memorial
                   ,scholarship
                   ,job
                   ,income
                   ,car
                   ,hobby
                   ,consph
                   ,conprd
                   ,level
                   ,recom
                   ,visit
                   ,visit_time
                   ,intro
                   ,memo
                   ,addinfo1
                   ,addinfo2
                   ,addinfo3
                   ,addinfo4
                   ,addinfo5
                   ,wdate
		from wiz_member
		where id=#{id}
	</select>


	<select id="selDupUserid" resultType="Integer" parameterType="String">
		SELECT COUNT(*) FROM wiz_member where id = #{id}
	</select>

    <insert id="insertMemberJoin" parameterType="main.java.app.hgm.member.MemberVO">

		insert into wiz_member (
		id,passwd,email,name,hphone,wdate )
		values ( #{id}, md5(#{passwd}) , #{name}, #{email},#{hphone},current_timestamp)
	</insert>

    <update id="updateMember" parameterType="main.java.app.hgm.member.MemberVO">
		update wiz_member set
		name=#{name},hphone=#{hphone},email=#{email}

		where id = #{id}
	</update>

    <update id="updateMemberPw" parameterType="main.java.app.hgm.member.MemberVO">
		update wiz_member set
		passwd=md5(#{passwd})
		where id = #{id}
	</update>

</mapper>

