<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" "http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">

<mapper namespace="satelite.kr">

	<insert id="insertSchedule"	parameterType="main.java.common.satelite.kr.ScheduleVO">
		insert into tbl_reserve (keyword,	searchNum, 	ctSource, day, time, state, use, repeat, regUser)
		values ( #{keyword}, #{searchNum}, #{ctSource}, #{day}, #{time}, #{state}, #{use}, #{repeat} #{userid} )
	</insert>


	<sql id="includeReserve">
		WHERE 1 = 1

		<if test='orderKeyword=="1"'>
			ORDER BY sn desc
		</if>
		<if test='orderKeyword=="2"'>
			ORDER BY sn asc
		</if>
		<if test="orderKeyword=='' or orderKeyword==' '">
			ORDER BY sn desc
		</if>
	</sql>


	<select id="selectReserveList"	resultType="main.java.common.satelite.kr.ScheduleVO" parameterType="main.java.common.satelite.kr.SearchVO">
		SELECT sn, keyword,	searchNum, 	ctSource, day, time, state, use, repeat, regDate, regUser
		FROM tbl_reserve
		<include refid="includeReserve" />
		<if test="rowStart > 0">
			LIMIT ${rowStart-1}, #{pageNo}
		</if>

	</select>



	<select id="selectReserveListCount" resultType="Integer"
			parameterType="main.java.common.satelite.kr.SearchVO">
		SELECT COUNT(*) FROM tbl_reserve
		<include refid="includeReserve" />
	</select>

</mapper>

